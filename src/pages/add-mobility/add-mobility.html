<!--
  Generated template for the AddMobilityPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>AddMobility</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-slides pager #slides>
    <!-- Localisation slide-->
    <form [formGroup]="mobilityForm" (ngSubmit)="onSubmitForm()">
      <ion-slide>
        <ion-chip>
          <ion-icon name="md-pin"></ion-icon>
          <ion-label>Localisation</ion-label>
        </ion-chip>
        <ion-list>
          <!-- Country row-->
          <ion-row class="form-group">
            <ion-label>Country</ion-label>
            <ion-searchbar (ionInput)="getCountries($event)" type="country" placeholder="Country name"
                           id="country" class="form-control" formControlName="country"
                           animated></ion-searchbar>
            <ion-list>
              <ion-item *ngFor="let item of countries">
                {{ item.label }}
              </ion-item>
            </ion-list>
          </ion-row>

          <!-- Town row-->
          <ion-row class="form-group">
            <ion-label id="townLabel">Town</ion-label>
            <ion-searchbar (ionInput)="getTowns($event)" type="text" placeholder="Town name"
                           id="town" class="form-control" formControlName="town" [disabled]="!isEnabled()"
                           animated></ion-searchbar>
            <ion-list>
              <ion-item *ngFor="let item of towns">
                {{ item.label }}
              </ion-item>
            </ion-list>
          </ion-row>
          <!-- Entity row -->
          <ion-row class="form-group">
            <div class="center">
              <ion-row>
                <ion-label id="entityLabel">University/Company</ion-label>
              </ion-row>
            </div>
            <ion-searchbar (ionInput)="getEntities($event)" type="text" placeholder="Company/University name"
                           id="entity" class="form-control" formControlName="entity" [disabled]="!isEnabled()"
                           animated></ion-searchbar>
            <ion-list>
              <entity-display *ngFor="let item of entities" [entity]="item"></entity-display>
            </ion-list>
          </ion-row>

        </ion-list>

      </ion-slide>
    </form>
    <!-- Duration slide-->
    <form [formGroup]="mobilityForm" (ngSubmit)="onSubmitForm()">
      <ion-slide>
        <ion-chip>
          <ion-icon name="md-calendar"></ion-icon>
          <ion-label>Duration</ion-label>
        </ion-chip>
        <ion-list>
          <ion-item class="form-group">
            <ion-label>Title</ion-label>
            <ion-input type="text"  id="title" class="form-control"
                          formControlName="title"></ion-input>
          </ion-item>
          <ion-item class="form-group">
            <ion-label>Description</ion-label>
            <ion-input type="text"  id="comment" class="form-control" placeholder="The description of the mobility"
                       formControlName="comment"></ion-input>
          </ion-item>

          <ion-item class="form-group">
            <ion-label>Start Date</ion-label>
            <ion-datetime displayFormat="DD/MM/YYYY" [(ngModel)]="mobilityStartDate" id="startDate" class="form-control"
                          formControlName="startDate"></ion-datetime>
          </ion-item>
          <ion-item class="form-group">
            <ion-label>End Date</ion-label>
            <ion-datetime displayFormat="DD/MM/YYYY" [(ngModel)]="mobilityEndDate" id="endDate" class="form-control"
                          formControlName="endDate"></ion-datetime>
          </ion-item>
          <button *ngIf="onEnd()" class="submit-btn" type="submit" [disabled]="mobilityForm.invalid" ion-button round>
            Submit
          </button>
        </ion-list>
      </ion-slide>
    </form>
  </ion-slides>
  <ion-buttons>
    <button ion-button color="dark" (click)="createEntity()" round>
      Create Entity
    </button>
    <button (click)="exitPage()" color="danger" ion-button round>
      Cancel
    </button>
  </ion-buttons>

</ion-content>
